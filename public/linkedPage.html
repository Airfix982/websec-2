<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Schedule</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body class="bg-light">
  <div id="app" class="container py-4">
    <h1 class="mb-4">{{ pageTitle }}</h1>

    <div class="d-flex align-items-center mb-3">
      <button @click="prevWeek" class="btn btn-outline-primary me-2">&larr;</button>
      <div class="schedule-header flex-grow-1 text-center">{{ currentWeek }} неделя</div>
      <button @click="nextWeek" class="btn btn-outline-primary ms-2">&rarr;</button>
    </div>

    <div class="table-responsive" v-if="scheduleData">
      <table class="table table-bordered text-center align-middle">
        <thead class="table-light">
          <tr>
            <th>Время</th>
            <th v-for="(date, i) in scheduleData.dates" :key="i">
              {{ weekDays[i] }}<br><small>{{ date }}</small>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="(time, rowIndex) in timeSlots" :key="time">
            <td>{{ time }}</td>
            <td v-for="dayIndex in [0,1,2,3,4,5]" :key="dayIndex" class="schedule-cell">
              <div v-if="scheduleData.pairs[dayIndex] && scheduleData.pairs[dayIndex][time]">
                <div v-for="(cellData, cIdx) in scheduleData.pairs[dayIndex][time]" :key="cIdx" v-html="getCellHtml(cellData)"></div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/linkedPage.js"></script>
</body>
</html>
